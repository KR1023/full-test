<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

 <mapper namespace="mapper.board">
 	<resultMap id="articleResult" type="articleVO">
 		<result property ="articleNO" column="articleNO" />
 		<result property ="title" column="title" />
 		<result property ="content" column="content" />
 		<result property ="category" column="category" />
 		<result property="writeDate" column="writeDate" />
 	</resultMap>
 	<resultMap id="categoryResult" type="categoryVO">
 		<result property="name" column="name"/>
 		<result property="id"  column="id"/>
 	</resultMap>
 	
 	<select id="listArticles" resultMap="articleResult" parameterType="String" >
 		<![CDATA[
 			SELECT * FROM t_board 
 			WHERE id = #{id}
 			ORDER BY writeDate DESC;
 		]]>
 	</select>
 	
 	<select id="getCategory" resultMap="categoryResult" parameterType="String">
 		<![CDATA[
 			SELECT * FROM t_category
 			WHERE id=#{id}
 		]]>
 	</select>
 	
 	<select id="getArticleNO" resultType="int">
 		<![CDATA[
 			SELECT MAX(articleNO)+1 FROM t_board;
 		]]>
 	</select>
 	
 	<insert id="addArticle" parameterType="articleVO">
 		<![CDATA[
 			INSERT INTO t_board (articleNO, title, content,category, id) values(#{articleNO}, #{title}, #{content}, #{category}, #{id})
 		]]>
 	</insert>
 	
 	<select id="viewArticle" resultMap="articleResult" parameterType="int">
 		<![CDATA[
 			SELECT * FROM t_board where articleNO = #{articleNO}
 		]]>
 	</select>
 </mapper>