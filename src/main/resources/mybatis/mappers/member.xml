<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

 <mapper namespace="mapper.member">
 	<resultMap id="memResult" type="memberVO">
 		<result property ="id" column="id" />
 		<result property ="pwd" column="pwd" />
 		<result property ="name" column="name" />
 		<result property ="email" column="email" />
 		<result property="joinDate" column="joinDate" />
 	</resultMap>
 	
 	<select id="selectAllMembers" resultMap="memResult">
 		<![CDATA[
 			SELECT * FROM t_member order by joinDate;
 		]]>
 	</select>
 	
 	<insert id="insertMember" parameterType="memberVO">
 		INSERT INTO t_member (id, pwd, name, email) 
 		VALUES(#{id}, sha2(#{pwd},256), #{name}, #{email}) 
 	</insert>
 	
 	<select id="loginMember" parameterType="memberVO" resultType="MemberVO">
 		<![CDATA[
 			SELECT * FROM t_member
 			WHERE id=#{id} and pwd=sha2(#{pwd},256)
 		]]>
 	</select>
 	
 	<!-- ID 중복 확인 -->
 	<select id="checkId" parameterType="String" resultType="int">
 		<![CDATA[
 			SELECT COUNT(id) FROM t_member WHERE id=#{id};
 		]]>
 	</select>
 	
 	<!-- 멤버 정보 가져오기 -->
 	<select id="memberInfo" parameterType="String" resultType="memberVO">
 		<![CDATA[
 			SELECT * FROM t_member WHERE id=#{id}
 		]]>
 	</select>
 	
 	<!-- 멤버 수정 -->
 	<update id="modMember" parameterType="MemberVO">
 		<![CDATA[
 			UPDATE t_member SET pwd=sha2(#{pwd},256), name=#{name}, email=#{email} WHERE id=#{id} 
 		]]>
 	</update>
 	
 </mapper>